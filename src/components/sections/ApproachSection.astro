---
import { Image } from "astro:assets";
import { serviceDataByName } from "@/services/services";

const serviceData = await serviceDataByName(Astro.params.serviceName);

const {
  titulo_enfoque,
  enfoques_de_trabajo,
  imagen_enfoque_1,
  imagen_enfoque_2,
  imagen_enfoque_3,
  frase_1,
  cta_enfoque_1,
  frase_2,
  cta_enfoque_2,
} = serviceData[0];
---

<section class="flex flex-col px-6 py-24 gap-5 gray-rounded-background">
  <div class="w-full m-auto max-w-screen-xl">
    <h2
      class="mb-8 text-3xl font-bold text-center md:text-4xl md:text-left text-primary-purple"
    >
      {titulo_enfoque}
    </h2>
  </div>

  <!-- Bloque 1 -->
  <div
    class="flex flex-col m-auto max-w-screen-xl gap-4 md:grid md:grid-cols-11 md:gap-16"
  >
    <article class="p-10 bg-white col-span-6 rounded-2xl">
      <div class="flex justify-between mb-2">
        <h3 class="text-xl font-bold text-primary-purple">
          {enfoques_de_trabajo[0].titulo}
        </h3>
        <span class="font-bold text-primary-purple/60">01</span>
      </div>
      <div
        class="[&_strong]:text-primary [&_a]:text-primary [&_a]:underline [&_p]:mb-2 [&_p]:text-sm"
        set:html={enfoques_de_trabajo[0].texto}
      />
    </article>

    {
      imagen_enfoque_1 && (
        <Image
          class="object-cover object-center w-full mx-auto col-span-4 rounded-2xl md:max-w-96"
          src={`${import.meta.env.DIRECTUS_URL}/assets/${imagen_enfoque_1}`}
          alt={`Imagen de ${enfoques_de_trabajo[0].titulo}`}
          width={353}
          height={239}
        />
      )
    }
  </div>

  <!-- Bloque 2 -->
  <div class="m-auto max-w-screen-xl">
    <div class="flex flex-col md:grid md:grid-cols-7">
      <article class="p-10 col-start-3 col-end-7 bg-accent-purple rounded-2xl">
        <div class="flex justify-between mb-2">
          <h3 class="text-xl font-bold text-primary-purple">
            {enfoques_de_trabajo[1].titulo}
          </h3>
          <span class="font-bold text-primary-purple/60">02</span>
        </div>
        <div
          class="[&_strong]:text-primary [&_a]:text-primary [&_a]:underline [&_p]:mb-2 [&_p]:text-sm"
          set:html={enfoques_de_trabajo[1].texto}
        />
      </article>
    </div>
  </div>

  <!-- Frase 1 -->
  {
    frase_1 && (
      <div class="m-auto max-w-screen-xl">
        <Image
          class="mb-4"
          src="/quote.webp"
          alt="comillas"
          width={40}
          height={40}
        />
        <p class="mb-12 text-xl font-bold text-black md:text-3xl">{frase_1}</p>
        {cta_enfoque_1 && (
          <a
            class="block px-8 py-4 font-bold text-center bg-white border-2 rounded-lg border-primary text-back md:inline-block"
            href="/contacto"
          >
            {cta_enfoque_1}
          </a>
        )}
      </div>
    )
  }

  <!-- Bloque 3 -->
  {
    enfoques_de_trabajo[2] && (
      <div class="flex flex-col m-auto max-w-screen-xl gap-4 md:grid md:grid-cols-11 md:gap-16">
        <article class="order-2 p-10 bg-white col-span-6 col-start-6 rounded-2xl">
          <div class="flex justify-between mb-2">
            <h3 class="text-xl font-bold text-primary-purple">
              {enfoques_de_trabajo[2].titulo}
            </h3>
            <span class="font-bold text-primary-purple/60">03</span>
          </div>
          <div
            class="[&_strong]:text-primary [&_a]:text-primary [&_a]:underline [&_p]:mb-2 [&_p]:text-sm"
            set:html={enfoques_de_trabajo[2].texto}
          />
        </article>

        {imagen_enfoque_2 && (
          <Image
            class="order-1 object-cover object-center w-full mx-auto col-span-4 col-start-2 rounded-2xl md:max-w-96"
            src={`${import.meta.env.DIRECTUS_URL}/assets/${imagen_enfoque_2}`}
            alt={`Imagen de ${enfoques_de_trabajo[2].titulo}`}
            width={353}
            height={239}
          />
        )}
      </div>
    )
  }

  <!-- Bloque 4 -->
  {
    enfoques_de_trabajo[3] && (
      <div class="m-auto max-w-screen-xl">
        <div class="flex flex-col md:grid md:grid-cols-7">
          <article class="p-10 col-start-3 col-end-7 bg-accent-purple rounded-2xl">
            <div class="flex justify-between mb-2">
              <h3 class="text-xl font-bold text-primary-purple">
                {enfoques_de_trabajo[3].titulo}
              </h3>
              <span class="font-bold text-primary-purple/60">04</span>
            </div>
            <div
              class="[&_strong]:text-primary [&_a]:text-primary [&_a]:underline [&_p]:mb-2 [&_p]:text-sm"
              set:html={enfoques_de_trabajo[3].texto}
            />
          </article>
        </div>
      </div>
    )
  }

  <!-- Bloque 5 -->
  {
    enfoques_de_trabajo[4] && (
      <div class="flex flex-col m-auto max-w-screen-xl gap-4 md:grid md:grid-cols-11 md:gap-16">
        <article class="p-10 bg-white col-span-6 rounded-2xl">
          <div class="flex justify-between mb-2">
            <h3 class="text-xl font-bold text-primary-purple">
              {enfoques_de_trabajo[4].titulo}
            </h3>
            <span class="font-bold text-primary-purple/60">05</span>
          </div>
          <div
            class="[&_strong]:text-primary [&_a]:text-primary [&_a]:underline [&_p]:mb-2 [&_p]:text-sm"
            set:html={enfoques_de_trabajo[4].texto}
          />
        </article>

        {imagen_enfoque_3 && (
          <Image
            class="object-cover object-center w-full mx-auto col-span-4 rounded-2xl md:max-w-96"
            src={`${import.meta.env.DIRECTUS_URL}/assets/${imagen_enfoque_3}`}
            alt={`Imagen de ${enfoques_de_trabajo[4].titulo}`}
            width={353}
            height={239}
          />
        )}
      </div>
    )
  }

  <!-- Frase 2 -->
  {
    frase_2 && (
      <div class="m-auto max-w-screen-xl">
        <Image
          class="mb-4"
          src="/quote.webp"
          alt="comillas"
          width={40}
          height={40}
        />
        <p class="mb-12 text-xl font-bold text-black md:text-3xl">{frase_2}</p>
        {cta_enfoque_2 && (
          <a
            class="block px-8 py-4 font-bold text-center bg-white border-2 rounded-lg border-primary text-back md:inline-block"
            href="/contacto"
          >
            {cta_enfoque_2}
          </a>
        )}
      </div>
    )
  }
</section>

<style>
  /* radial and linear at 230px  */
  .gray-rounded-background {
    background: radial-gradient(
        150% 300px at 50% 230px,
        #f5f8f8 75%,
        transparent 75.2%
      ),
      linear-gradient(180deg, transparent 230px, #f5f8f8 230px), #fff;
  }

  @media (width>=768px) {
    .gray-rounded-background {
      background: radial-gradient(
          100% 300px at 50% 230px,
          #f5f8f8 75%,
          transparent 75.2%
        ),
        linear-gradient(180deg, transparent 230px, #f5f8f8 230px), #fff;
    }
  }
</style>
